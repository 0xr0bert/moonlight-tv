#include "unity.h"
#include "stream/video/sps_parser.h"

static const uint8_t nalu_header[] = {
        0x00, 0x00, 0x00, 0x01, 0x42, 0x01, 0x01, 0x21,
        0x40, 0x00, 0x00, 0x03, 0x00, 0x00, 0x03, 0x00,
        0x00, 0x03, 0x00, 0x00, 0x03, 0x00, 0x7B, 0xA0,
        0x03, 0xC0, 0x80, 0x11, 0x07, 0xCB, 0x96, 0xB4,
        0xA4, 0x21, 0x19, 0x2E, 0x30, 0x16, 0xA0, 0xC0,
        0xC0, 0xD4, 0x82, 0x00, 0x00, 0x03, 0x00, 0x02,
        0x00, 0x00, 0x03, 0x00, 0x78, 0x5F, 0x1A, 0x2D
};

void setUp(void) {
    // set stuff up here
}

void tearDown(void) {
    // clean stuff up here
}

void test_sps_parse_dimension_hevc(void) {
    sps_dimension_t dimension;
    sps_parse_dimension_hevc(&nalu_header[4], &dimension);
    TEST_ASSERT_EQUAL_INT(1920, dimension.width);
    TEST_ASSERT_EQUAL_INT(1088, dimension.height);
}

// not needed when using generate_test_runner.rb
int main(void) {
    UNITY_BEGIN();
    RUN_TEST(test_sps_parse_dimension_hevc);
    return UNITY_END();
}